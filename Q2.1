# CDF of the delay D (in minutes)
# P(D ≤ 0) = 0.7
# P(0 < D < 5) = 0.1
# P(5 ≤ D < 10) = 0.1
# P(10 ≤ D < 15) = 0.07
# P(15 ≤ D < 20) = 0.02
# P(20 ≤ D) = 0.01
# => piecewise CDF F(t) = P(D ≤ t)

function delay_cdf(t::Real)
    if t <= 0
        return 0.7
    elseif t <= 5
        return 0.8        # 0.7 + 0.1
    elseif t <= 10
        return 0.9        # 0.8 + 0.1
    elseif t <= 15
        return 0.97       # 0.9 + 0.07
    elseif t <= 20
        return 0.99       # 0.97 + 0.02
    else
        return 1.0        # 0.99 + 0.01
    end
end


"""
    meeting_time(N; target = 0.9)

Return the smallest T0 (in minutes) such that
P(all N friends are on time) = F(T0)^N ≥ target,
where F is the CDF of the delay D.
"""
function meeting_time(N::Int; target = 0.9)
    # Candidate T0 values where the CDF jumps
    candidates = [0, 5, 10, 15, 20]

    for T0 in candidates
        p_all_on_time = delay_cdf(T0)^N
        if p_all_on_time >= target
            return T0, p_all_on_time
        end
    end

    # If nothing reached the target (won't happen here), return nothing
    return nothing
end

# ---- Compute for N = 3, 5, 10 ----
for N in (3, 5, 10)
    T0, prob = meeting_time(N)
    println("N = $N: ask your friends to meet $T0 minutes early.")
    println("        P(catching the train) = $(round(prob, digits=4))")
end
